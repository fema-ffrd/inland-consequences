<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Average Annualized Loss (AAL) Technical Implementation - Inland Consequences</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Average Annualized Loss (AAL) Technical Implementation";
        var mkdocs_page_input_path = "AAL_tech_implementation.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Inland Consequences
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Overview</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="..">Consequences Solution</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Methodlogy</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../inventory_methodology/">Inventory Methodology</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../buildingvalidation_techapproach/">Building Inventory Validation Flags Technical Approach</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../hazardvalidation_techapproach/">Hazard Validation Flag Technical Approach</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../inland_methodology/">Inland Consquences Methodology</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../coastal_methodology/">Coastal Consequences Methodology</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Technical Implementation</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../building_inventories/">Building Inventories Technical Implementation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ddf_tech_implementation/">Inland Consequences Depth-Damage Function Technical Implementation</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Average Annualized Loss (AAL) Technical Implementation</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#aal-calculation-method">AAL Calculation Method</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#truncation-option">Truncation Option</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#non-truncated-aal-default-0">Non-Truncated AAL (Default, 0)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#truncated-aal-1">Truncated AAL (1)</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#minimum-return-period-requirements">Minimum Return Period Requirements</a>
    </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Inland Consequences</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Technical Implementation</li>
      <li class="breadcrumb-item active">Average Annualized Loss (AAL) Technical Implementation</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/fema-ffrd/inland-consequences/edit/master/docs/AAL_tech_implementation.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="average-annualized-loss-aal-technical-implementation">Average Annualized Loss (AAL) Technical Implementation<a class="headerlink" href="#average-annualized-loss-aal-technical-implementation" title="Permanent link">&para;</a></h1>
<p>The inland consequence methodology computes Average Annualized Loss (AAL) using a numerical integration approach consistent with the method implemented in FEMA’s Hazus Program. The recommended implementation leverages the AAL calculation code developed for <strong>SPHERE</strong>, which is directly adapted from the Hazus Riemann sum formulation. This approach does not require a fixed set or number of return periods; instead, it operates on all available modeled frequencies and loss estimates provided by the user.</p>
<hr />
<h2 id="aal-calculation-method">AAL Calculation Method<a class="headerlink" href="#aal-calculation-method" title="Permanent link">&para;</a></h2>
<p>The AAL is calculated using a discrete Riemann sum that integrates the loss–exceedance relationship across all provided return periods. The function below shows the reference implementation adapted from the Hazus Technical Manual. It expects:</p>
<p><strong>Inputs:</strong></p>
<ul>
<li><code>in_rpnames</code>: a sorted (ascending) list of return periods</li>
<li><code>in_losses</code>: a list of loss values corresponding to each return period</li>
</ul>
<p>The function returns a single numeric AAL value.</p>
<pre><code class="language-python">#Formula adapted from Hazus Technical Manual 

# IN: 

#   in_rpnames = SORTED (ascending) list of return periods that pair sequentially with in_losses 

#             in_losses = list of losses that pair sequentially with in_rpnames 

# OUT: 

#   numeric value representing adjusted loss 

def calc_aal(in_rpnames, in_losses): 

    SumAnnLoss = 0 

    for i in range(len(in_losses)): 

        if i == (len(in_losses) - 1): 

            SumAnnLoss += (1 / in_rpnames[i]) * (in_losses[i]) 

        else: 

            SumAnnLoss += ((1 / in_rpnames[i]) - (1 / in_rpnames[i + 1])) * (((in_losses[i]) + (in_losses[i + 1])) / 2) 

    return SumAnnLoss 
</code></pre>
<p>This formulation treats each return-period pair as a point on the loss-exceedance curve and computes the integrated area beneath the curve.</p>
<hr />
<h2 id="truncation-option">Truncation Option<a class="headerlink" href="#truncation-option" title="Permanent link">&para;</a></h2>
<p>The methodology supports two AAL calculation modes: non-truncated (default) and truncated.</p>
<h3 id="non-truncated-aal-default-0">Non-Truncated AAL (Default, 0)<a class="headerlink" href="#non-truncated-aal-default-0" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Includes all provided return periods, even those with $0 loss.</p>
</li>
<li>
<p>When the lowest-frequency return period has $0 loss, the $0 value is averaged with the next nonzero period.</p>
</li>
</ul>
<p><em>Example:</em></p>
<ul>
<li>50-year loss = $0</li>
<li>100-year loss = $1,200</li>
<li>Average used in integration = (0 + 1,200) / 2 = <strong>$600</strong></li>
</ul>
<p>This follows the Hazus approach and provides a more conservative AAL estimate.</p>
<h3 id="truncated-aal-1">Truncated AAL (1)<a class="headerlink" href="#truncated-aal-1" title="Permanent link">&para;</a></h3>
<ul>
<li>Excludes the $0-loss return period from the summation.</li>
<li>This approach aligns with the GoConsequences implementation.</li>
<li>Generally produces lower AAL values, particularly when few frequencies are supplied.</li>
</ul>
<p>Users should select the truncation setting based on analysis goals, regulatory requirements, or consistency with other modeling frameworks.</p>
<hr />
<h2 id="minimum-return-period-requirements">Minimum Return Period Requirements<a class="headerlink" href="#minimum-return-period-requirements" title="Permanent link">&para;</a></h2>
<p>To ensure stable and interpretable AAL results, the tool should require at least three return periods. While the Riemann sum method can operate with fewer, accuracy improves substantially as more frequencies are included, particularly higher-frequency (smaller return period) events. Loss estimates become more reliable with a greater number of return periods; therefore, for best results, users should provide as many frequencies as possible across the full range of the hazard.</p>
<p>Future enhancements may include tooltip guidance on selecting appropriate return periods and automated detection of return periods from file names. However, the current implementation requires users to enter all return period values explicitly.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../ddf_tech_implementation/" class="btn btn-neutral float-left" title="Inland Consequences Depth-Damage Function Technical Implementation"><span class="icon icon-circle-arrow-left"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/fema-ffrd/inland-consequences" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../ddf_tech_implementation/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"></script>
      <script src="../javascripts/katex.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
